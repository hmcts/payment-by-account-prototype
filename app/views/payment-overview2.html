{% extends "layouts/admin/base.html" %}

{% block pageTitle %}
  Payment overview
{% endblock %}

{% block content %}
<br>

  <div class="jui-width-container">
    <main role="main" class="govuk-main-wrapper">

      <div class="govuk-grid-row">
        <div class="govuk-grid-column-one-half">

          <h1 class="govuk-heading-xl">Payment overview</h1>

        </div>
      </div>

              <div class="govuk-grid-row">
                <div class="govuk-grid-column-one-quarter">

                  <h1 class="govuk-heading-l">Account</h1>

                  <h2 class="govuk-heading-l"><a class="govuk-link govuk-!-font-size-24" href="/PBA0241463">PBA0241463</a><br>
                   <span class="govuk-caption-m">£20,000.00
                     <br>Credit  limit
                     <br>
                     <br>
                   <p class="govuk-body govuk-!-font-size-36 govuk-!-font-weight-bold">£2746.00<span class="govuk-caption-m">Available to spend</span></p>
                </h2>


                <h3 class="govuk-heading-l govuk-!-font-weight-regular"><a class="govuk-link govuk-!-font-size-19" href="/statements">Statement summary</a><br>
                  <p class="govuk-body govuk-!-font-size-19 govuk-!-font-weight-bold">£17,254.00<span class="govuk-caption-m">Next payment due<div class="govuk-body govuk-!-font-size-19" id="nextPaymentDue">4 Aug 2018</div></span></p>
                  <button type="submit" class="govuk-button">
                  Make payment
                </button>
              </h3>




                <ul class="govuk-list">
                <li>
                  <!-- <a class="govuk-link" href="/statements">View statement</a> -->
                </li>
                <li>
                  <a class="govuk-link" href="/dummy">Add an account</a>
                </li>
              </ul>









                <!-- <h2 class="govuk-heading-l"><br>
                 £2746.00<br>
                 <span class="govuk-caption-m">Available to spend</span>
              </h2> -->




            <!-- <ul class="govuk-list">
          <li>
            <a class="govuk-link" href="#">Add an account</a>
          </li>
          <li>
            <a class="govuk-link" href="#">Make a payment</a>
          </li>
          <li>
            <a class="govuk-link" href="#">Benefit fraud</a>
          </li>
          <li>
            <a class="govuk-link" href="#">More</a>
          </li>
        </ul> -->

        <br>
        <br>
        <br>


        </div>

        <div class="govuk-grid-column-three-quarters">

          <h1 class="govuk-heading-l">Transactions</h1>

          <div class="govuk-grid-row">

            <div class="govuk-grid-column-one-third">
              <div class="govuk-form-group">
                <label class="govuk-label" for="email">
                  Date range
                </label>
              <div class="govuk-input" id="reportrange" style="background: #fff; font-size: 18px; cursor: pointer; padding: 8px 10px; border: 2px solid #000; width: 100%">
                <i class="hod-calendar"></i>&nbsp;
                <span></span>
                 <i class="fa fa-caret-down"></i>
            </div>
            </div>
            </div>



            <div class="govuk-grid-column-two-thirds">
              <form class="govuk-form-group">
                <label class="govuk-label" for="email">
                  Search
                </label>

                  <div style="float: left; margin-right: 1%; width: 80%;">
                    <input type="text" class="govuk-input" id="myInput" placeholder="Enter a case number or reference" style="width: 100%;">
                  </div>
                  <div style="float: left; width: 19%;">
                    <button type="button" class="govuk-button" onclick="myFunction()" style="margin: 0; width: 100%;">Search</button>
                  </div>


                  <!-- <form class="example" action="action_page.php">
                    <input class="govuk-input" type="text" placeholder="Enter a case number or reference" name="search">
                    <button type="submit"><i class="fa fa-search"></i></button>
                  </form> -->



              </form>
            </div>



            </div>









          <table class="govuk-body govuk-!-font-size-16" id="transactionstable">
          <p class="govuk-body govuk-!-font-size-16">  <!-- 7 payments --> </p>
          <thead class="govuk-!-font-size-16">
      <tr class="govuk-table__row">
        <th class="govuk-table__header" scope="col">Payment reference</th>
        <th class="govuk-table__header" scope="col">Case</th>
        <th class="govuk-table__header" scope="col">Reference</th>
        <th class="govuk-table__header" scope="col">Approver</th>
        <th class="govuk-table__header" scope="col">Status</th>
        <th class="govuk-table__header" scope="col">Date</th>
        <th class="govuk-table__header" scope="col">Amount</th>

      </tr>
    </thead>
    <tbody>
      <tr>
        <td data-label="Payment reference"><a href="/RC-2352-6362-6257-7742">RC-2352-6362-6257-7742<a/></td>
        <td data-label="Case">DE0DE9F</td>
        <td data-label="Your reference">Divorce 7</td>
        <td data-label="Approver">James</td>
        <td data-label="Status">Pending</td>
        <td id="pendingPayment" data-label="Date"></td>
        <td data-label="Amount">-£550.00</td>
      </tr>

      <tr>
        <td data-label="Payment reference"><a href="/RC-9584-2521-7742-1457">RC-9584-2521-7742-1457<a/></td>
        <td data-label="Case">BR024GH</td>
        <td data-label="Your reference">Probate 33</td>
        <td data-label="Approver">Lucy</td>
        <td data-label="Status">Completed</td>
        <td data-label="Date">29 Jul 2018</td>
        <td data-label="Amount">-£215.00</td>
      </tr>

      <tr>
        <td data-label="Payment reference"><a href="/dummy">RC-6124-1415-7215-1515<a/></td>
        <td data-label="Case">FR03VW2</td>
        <td data-label="Your reference">Divorce 6</td>
        <td data-label="Approver">Joe</td>
        <td data-label="Status">Completed</td>
        <td data-label="Date">27 Jul 2018</td>
        <td data-label="Amount">-£550.00</td>
      </tr>

      <tr class="linked-payment">
        <td data-label="Payment reference" class="linked-payment-ref">DIRECT DEBIT PAYMENT</td>
        <td data-label="Case">-</td>
        <td data-label="Your reference">-</td>
        <td data-label="Approver">-</td>
        <td data-label="Status">Completed</td>
        <td data-label="Date">26 Jul 2018</td>
        <td data-label="Amount">+£2590.40</td>
      </tr>

      <tr>
        <td data-label="Payment reference"><a href="/dummy">RC-6124-1415-7215-1515<a/></td>
        <td data-label="Case">DE024JD</td>
        <td data-label="Your reference">Probate 32</td>
        <td data-label="Approver">Joe</td>
        <td data-label="Status">Completed</td>
        <td data-label="Date">25 Jul 2018</td>
        <td data-label="Amount">-£215.00</td>
      </tr>

      <tr>
        <td data-label="Payment reference"><a href="/dummy">RC-2234-2626-6772-1678<a/></td>
        <td data-label="Case">FG083FG</td>
        <td data-label="Your reference">Probate 31</td>
        <td data-label="Approver">James</td>
        <td data-label="Status">Completed</td>
        <td data-label="Date">24 Jul 2018</td>
        <td data-label="Amount">-£215.00</td>
      </tr>

      <tr>
        <td data-label="Payment reference"><a href="/dummy">RC-3467-6167-1676-7832<a/></td>
        <td data-label="Case">DEF2593</td>
        <td data-label="Your reference">Probate 30</td>
        <td data-label="Approver">James</td>
        <td data-label="Status">Completed</td>
        <td data-label="Date">24 Jul 2018</td>
        <td data-label="Amount">-£215.00</td>
      </tr>

      <tr>
        <td data-label="Payment reference"><a href="/dummy">RC-7436-2522-7632-8363<a/></td>
        <td data-label="Case">BR023FD</td>
        <td data-label="Your reference">Divorce 5</td>
        <td data-label="Approver">Lucy</td>
        <td data-label="Status">Completed</td>
        <td data-label="Date">23 Jul 2018</td>
        <td data-label="Amount">-£550.00</td>
      </tr>




    </tbody>
  </table>





        </div>

      </div>
      <br>
      <br>
      <br>
        <a class="govuk-link govuk-!-font-size-14" href="/payment-overview">Alternate overview page</a>






















    </main>
  </div>



{% endblock %}
{% block page_scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
<script>

$(function() {
  $('input[name="birthday"]').daterangepicker({
    singleDatePicker: true,
    showDropdowns: true,
    minYear: 1901,
    maxYear: parseInt(moment().format('YYYY'),10)
  }, function(start, end, label) {
    var years = moment().diff(start, 'years');
    // alert("You are " + years + " years old!");
  });

});

$(function() {

    var start = moment().subtract(29, 'days');
    var end = moment();

    function cb(start, end) {
        $('#reportrange span').html(start.format('DD MMM YYYY') + ' - ' + end.format('DD MMM YYYY'));
    }

    $('#reportrange').daterangepicker({
        startDate: start,
        endDate: end,
        ranges: {
          'Next 7 Days': [moment().add(6, 'days'), moment().add(1, 'days')],
          'Tomorrow': [moment().add(1, 'days'), moment().add(1, 'days')],
           'Today': [moment(), moment()],
           'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
           'Last 7 Days': [moment().subtract(6, 'days'), moment()],
           'Last 30 Days': [moment().subtract(29, 'days'), moment()],
           'This Month': [moment().startOf('month'), moment().endOf('month')],
           'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
        }
    }, cb);

    cb(start, end);

});

function myFunction() {
  // Declare variables
  var input, filter, table, tr, td, i;
  input = document.getElementById("myInput");
  filter = input.value.toUpperCase();
  table = document.getElementById("transactionstable");
  tr = table.getElementsByTagName("tr");

  // Loop through all table rows, and hide those who don't match the search query
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[2];
    if (td) {
      if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }
  }
}
  pendingPayment();

  function pendingPayment() {
    var dateField = document.getElementById('pendingPayment');
    dateField.innerHTML = moment().format('DD MMM YYYY');
  }

  nextPaymentDue();

  function nextPaymentDue() {
    var dateField = document.getElementById('nextPaymentDue');
    dateField.innerHTML = moment().add(1, 'months').format ('01 MMM YYYY');
  }



</script>


{% endblock %}
